"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const fs_1 = __importDefault(require("fs"));
const client_1 = require("./nodes/client");
const configName = (process.argv.slice(2)[0]) || "rpc.json";
const configFile = path_1.default.join(process.cwd(), configName);
fs_1.default.stat(configFile, (err, stat) => {
    if (err) {
        console.error(err);
        return;
    }
    fs_1.default.readFile(configFile, (err, configData) => {
        if (err) {
            console.error(err);
            return;
        }
        const config = JSON.parse(configData.toString("utf8"));
        delete config.generator;
        console.log("Generating schema..");
        (0, client_1.generateClientSchema)(config).then((result) => {
            console.log("Schema Generated, Version", result.version);
        }).catch((e) => {
            console.log(e);
            throw e;
        });
    });
});
//# sourceMappingURL=cmd.js.map